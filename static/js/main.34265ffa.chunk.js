(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{36:function(e,t,a){e.exports=a(66)},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),c=a.n(l),o=a(10),s=a.n(o),i=a(12),u=a(9),m=a(11),p=a(2),d=a(3),h=a.n(d),E=Object(n.createContext)(null);function v(){var e=Object(n.useContext)(E),t=e.userData,a=e.setUserData,l=Object(p.f)();return r.a.createElement("nav",{className:"auth-options"},t.user?r.a.createElement("button",{onClick:function(){a({token:void 0,user:void 0}),localStorage.setItem("auth-token","")}},"Log out"):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return l.push("/register")}},"Register"),r.a.createElement("button",{onClick:function(){return l.push("/login")}},"Log in")))}function f(){return r.a.createElement("header",{id:"header"},r.a.createElement(m.b,{to:"/"},r.a.createElement("h1",{className:"title"}," Events App")),r.a.createElement(v,null))}var b=a(31),g=a(32),k=a(35),j=a(34),O=(a(64),a(33)),C=a(68),y=function(e){Object(k.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).titleChange=function(e){n.setState({title:e.target.value})},n.locationChange=function(e){n.setState({location:e.target.value})},n.dateChange=function(e){n.setState({date:e.target.value})},n.timeChange=function(e){n.setState({time:e.target.value})},n.descriptionChange=function(e){n.setState({description:e.target.value})},n.state={events:[],id:0,title:"",location:"",date:"",time:"",description:""},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("https://events-app.herokuapp.com/events/").then((function(t){e.setState({events:t.data,id:0,title:"",location:"",date:"",time:"",description:""})}))}},{key:"submit",value:function(e,t){var a=this;e.preventDefault(),0===t?h.a.post("https://events-app.herokuapp.com/events/",{title:this.state.title,location:this.state.location,date:this.state.date,time:this.state.time,description:this.state.description}).then((function(){a.componentDidMount()})):h.a.put("https://events-app.herokuapp.com/events/".concat(t),{title:this.state.title,location:this.state.location,date:this.state.date,time:this.state.time,description:this.state.description}).then((function(){a.componentDidMount()}))}},{key:"edit",value:function(e){var t=this;h.a.get("https://events-app.herokuapp.com/events/".concat(e)).then((function(e){console.log(e.data),t.setState({id:e.data._id,title:e.data.title,location:e.data.location,date:e.data.date,time:e.data.time,description:e.data.description})}))}},{key:"delete",value:function(e){var t=this;h.a.delete("https://events-app.herokuapp.com/events/".concat(e)).then((function(){t.componentDidMount()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row mt-4"},r.a.createElement("br",null),r.a.createElement("div",{className:"col s4"},r.a.createElement("form",{className:"form",onSubmit:function(t){return e.submit(t,e.state.id)}},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"autocomplete-input"},"Title"),r.a.createElement("input",{value:this.state.title,onChange:function(t){return e.titleChange(t)},type:"text"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"autocomplete-input"},"Location"),r.a.createElement("input",{value:this.state.location,onChange:function(t){return e.locationChange(t)},type:"text",id:"autocomplete-input",className:"autocomplete"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"autocomplete-input"},"Date"),r.a.createElement("input",{value:this.state.date,onChange:function(t){return e.dateChange(t)},type:"date",className:"datepicker"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"autocomplete-input"},"Time"),r.a.createElement("input",{value:this.state.time,onChange:function(t){return e.timeChange(t)},type:"time",className:"autocomplete"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",{htmlFor:"autocomplete-input"},"Description"),r.a.createElement("input",{value:this.state.description,onChange:function(t){return e.descriptionChange(t)},type:"text",id:"autocomplete-input",className:"autocomplete"})),r.a.createElement("button",{className:"submit-button",type:"submit",name:"action"},"Submit"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("div",{className:"col s8"},r.a.createElement(O.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,this.state.events.map((function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.location),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.time),r.a.createElement("td",null,t.description),r.a.createElement("td",null,r.a.createElement(C.a,{onClick:function(a){return e.edit(t._id)},className:"btn waves-effect waves-light",type:"submit",name:"action"},r.a.createElement("i",{className:"material-icons"},"edit"))),r.a.createElement("td",null,r.a.createElement(C.a,{onClick:function(a){return e.delete(t._id)},className:"btn waves-effect waves-light",type:"submit",name:"action"},r.a.createElement("i",{className:"material-icons"},"delete"))))}))))))}}]),a}(r.a.Component);function N(){var e=Object(n.useContext)(E).userData,t=Object(p.f)();return Object(n.useEffect)((function(){e.user||t.push("/login")})),r.a.createElement("div",{className:"page"},r.a.createElement(y,null))}function w(e){return r.a.createElement("div",{className:"error-notice"},r.a.createElement("span",null,e.message),r.a.createElement("button",{onClick:e.clearError},"x"))}function S(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(),o=Object(u.a)(c,2),m=o[0],d=o[1],v=Object(n.useState)(),f=Object(u.a)(v,2),b=f[0],g=f[1],k=Object(n.useContext)(E).setUserData,j=Object(p.f)(),O=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:m},e.next=5,h.a.post("https://events-app.herokuapp.com/users/login/",n);case 5:r=e.sent,k({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),j.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&g(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Login"),b&&r.a.createElement(w,{message:b,clearError:function(){return g(void 0)}}),r.a.createElement("form",{className:"form",onSubmit:O},r.a.createElement("label",null,"Email: "),r.a.createElement("input",{id:"login-email",type:"email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{id:"login-password",type:"password",onChange:function(e){return d(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Log in"})))}function x(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(),o=Object(u.a)(c,2),m=o[0],d=o[1],v=Object(n.useState)(),f=Object(u.a)(v,2),b=f[0],g=f[1],k=Object(n.useState)(),j=Object(u.a)(k,2),O=j[0],C=j[1],y=Object(n.useContext)(E).setUserData,N=Object(p.f)(),S=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:m,passwordCheck:b},e.next=5,h.a.post("https://events-app.herokuapp.com/users/register/",n);case 5:return e.next=7,h.a.post("https://events-app.herokuapp.com/users/login/",{email:a,password:m});case 7:r=e.sent,y({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),N.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response.data.msg&&C(e.t0.response.data.msg);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Register"),O&&r.a.createElement(w,{message:O,clearError:function(){return C(void 0)}}),r.a.createElement("form",{className:"form",onSubmit:S},r.a.createElement("label",null,"Email: "),r.a.createElement("input",{id:"register-email",type:"email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{id:"register-password",type:"password",onChange:function(e){return d(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Verify password",onChange:function(e){return g(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Register"})))}a(65);function D(){var e=Object(n.useState)({token:void 0,user:void 0}),t=Object(u.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,h.a.post("https://events-app.herokuapp.com/users/tokenIsValid/",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,h.a.get("https://events-app.herokuapp.com/users/",{headers:{"x-auth-token":t}});case 8:a=e.sent,l({token:t,user:a.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(E.Provider,{value:{userData:a,setUserData:l}},r.a.createElement(f,null),r.a.createElement("div",{className:"container"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:N}),r.a.createElement(p.a,{path:"/login",component:S}),r.a.createElement(p.a,{path:"/register",component:x}))))))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.34265ffa.chunk.js.map